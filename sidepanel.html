<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Stream Scout Side Panel</title>
    <link rel="stylesheet" href="sidepanel.css" />
  </head>
  <body>
    <div id="sp-collapsible" class="sp-collapsible expanded">
      <button id="sp-collapse-btn" class="sp-collapse-btn"></button>
      <div id="app" class="sp-root">
        <header class="sp-header">
          <h1 class="sp-title sp-title-centered">Stream Scout</h1>
          <div class="sp-detect-container">
            <span id="contextBadge" class="sp-context-badge">
              Detecting page...
            </span>
          </div>
          <p id="contextSubtitle" class="sp-subtitle">
            Open an IMDb title page to see details and AI suggestions.
          </p>
        </header>

        <main class="sp-main">

          <!-- TAB HEADER -->
          <div class="sp-tabs">
            <button class="sp-tab-btn active" data-tab="search">Search</button>
            <button class="sp-tab-btn" data-tab="watchlist">Watchlist</button>
            <button class="sp-tab-btn" data-tab="watched">Watched</button>
          </div>

          <!-- SEARCH TAB (current behavior) -->
          <div id="tab-search" class="sp-tab-panel" style="display: block;">
            <!-- Context card for the title on the current page -->
            <section class="sp-section">
              <h2 class="sp-section-title">On this page</h2>
              <div id="contextCard" class="context-card context-card-empty">
                <p class="context-empty-text">
                  No supported title detected yet.
                </p>
              </div>
            </section>

            <!-- AI suggestions based on current title -->
            <section class="sp-section">
              <div class="sp-section-header">
                <h2 class="sp-section-title">AI suggestions</h2>
                <div id="aiStatus" class="ai-loading hidden">
                  <div class="dot"></div>
                  <div class="dot"></div>
                  <div class="dot"></div>
                  <span class="ai-loading-text">
                    Searching for recommendations...
                  </span>
                </div>
              </div>

              <div class="ai-controls">
                <textarea
                  id="aiPrompt"
                  class="ai-input"
                  rows="2"
                  placeholder="Tell AI what you are in the mood for (optional)"
                ></textarea>
                <button id="btnAskAi" class="btn primary full-width">
                  ðŸŽ¬ Ask AI for similar picks
                </button>
              </div>

              <div id="aiEmpty" class="sp-empty-msg">
                AI will suggest movies or shows based on the title on this page.
              </div>

              <div id="aiResults" class="ai-results"></div>
            </section>
          </div>

          <!-- WATCHLIST TAB -->
          <div id="tab-watchlist" class="sp-tab-panel" style="display: none;">
            <section class="sp-section">
              <h2 class="sp-section-title">Watchlist</h2>
              <div id="watchlistContainer" class="ctx-list">
                <!-- watchlist cards rendered here -->
              </div>
            </section>
          </div>

          <!-- WATCHED TAB -->
          <div id="tab-watched" class="sp-tab-panel" style="display: none;">
            <section class="sp-section">
              <h2 class="sp-section-title">Watched</h2>
              <div id="watchedContainer" class="ctx-list">
                <!-- watched cards rendered here -->
              </div>
            </section>
          </div>

        </main>
      </div>
    </div>
    <template id="provider-pill-tpl">
      <span class="provider-tag"></span>
    </template>
    <script type="module" src="sidepanel.js"></script>
  </body>
</html>
