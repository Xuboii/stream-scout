<!doctype html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Stream Scout Side Panel</title>
    <link rel="stylesheet" href="sidepanel.css" />
  </head>
  <body>
    <div id="sp-collapsible" class="sp-collapsible expanded">
      <button id="sp-collapse-btn" class="sp-collapse-btn"></button>
      <div id="app" class="sp-root">
        <header class="sp-header">
          <h1 class="sp-title sp-title-centered">Stream Scout</h1>
          <div class="sp-detect-container">
            <span id="contextBadge" class="sp-context-badge">
              Detecting page...
            </span>
          </div>
          <p id="contextSubtitle" class="sp-subtitle">
            Open an IMDb title page to see details and AI suggestions.
          </p>
        </header>

        <main class="sp-main">
          <!-- Context card for the title on the current page -->
          <section class="sp-section">
            <h2 class="sp-section-title">On this page</h2>
            <div id="contextCard" class="context-card context-card-empty">
              <p class="context-empty-text">
                No supported title detected yet.
              </p>
            </div>
          </section>

          <!-- AI suggestions based on current title -->
          <section class="sp-section">
            <div class="sp-section-header">
              <h2 class="sp-section-title">AI suggestions</h2>
              <div id="aiStatus" class="ai-loading hidden">
                <div class="dot"></div>
                <div class="dot"></div>
                <div class="dot"></div>
                <span class="ai-loading-text">Searching for recommendations...</span>
              </div>
            </div>

            <div class="ai-controls">
              <textarea
                id="aiPrompt"
                class="ai-input"
                rows="2"
                placeholder="Tell AI what you are in the mood for (optional)"
              ></textarea>
              <button id="btnAskAi" class="btn primary full-width">
                ðŸŽ¬ Ask AI for similar picks
              </button>
            </div>

            <div id="aiEmpty" class="sp-empty-msg">
              AI will suggest movies or shows based on the title on this page.
            </div>

            <div id="aiResults" class="ai-results"></div>
          </section>
        </main>
      </div>
    </div>

    <template id="provider-pill-tpl">
      <span class="provider-tag"></span>
    </template>

    <template id="suggestion-tpl">
      <article class="suggest-card">
        <div class="suggest-main">
          <div class="suggest-header">
            <div class="suggest-title-block">
              <a class="s-title-link" target="_blank" rel="noopener noreferrer">
                <span class="s-title"></span>
              </a>
              <span class="s-meta"></span>
            </div>
            <span class="imdb-pill">
              <span class="imdb-label">IMDb</span>
              <span class="imdb-score"></span>
            </span>
          </div>
          <div class="suggest-providers">
            <span class="providers-label">Available on</span>
            <div class="providers"></div>
          </div>
        </div>
        <div class="suggest-actions">
          <button
            class="btn-icon btn-watchlist"
            title="Add to watchlist"
          >
            â˜†
          </button>
          <button
            class="btn-icon btn-watched"
            title="Mark as watched"
          >
            âœ“
          </button>
        </div>
      </article>
    </template>
    <script type="module" src="sidepanel.js"></script>
  </body>
</html>
